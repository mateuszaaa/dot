#!/bin/bash

alias kkil='killall'
alias ls='ls --color=auto'
alias report='~/.matconf/bin/status.py'
alias c='xclip -selection clipboard'
alias glog='git log --oneline |head -30'
alias bb-restart='ssh buildbot cd /home/lapekc6/bm_ci/tools/;git pull -r;'

function ut() {
    if [ -z $1 ]; then
        echo "no domain provided"
    else
        echo "./swim/$1/$1_ut --source_dir=../swim/$1/testing/data"
        ./swim/$1/$1_ut --source_dir=../swim/swim/$1/testing/data
    fi
}

function vut() {
    if [ -z $1 ]; then
        echo "no domain provided"
    else
        echo "vlagrind --gen-suppressions=all --error-exitcode=1 --track-origins=yes --leak-check=full --show-leak-kinds=all ./swim/$1/$1_ut --source_dir=../swim/$1/testing/data"
        valgrind --gen-suppressions=all --error-exitcode=1 --track-origins=yes --leak-check=full --show-leak-kinds=all ./swim/$1/$1_ut --source_dir=../swim/swim/$1/testing/data
    fi
}

function redmi() {
    txt=`echo $1 | sed 's/ /%s/g'`
    adb shell input text $txt
}

function bb_restart() {
    ssh buildbot cd /home/lapekc6/bm_ci/tools/;git pull -r; buildbot restart /home/lapekc6/bm_ci/bm_buildbot/master/

}

function copybash() {
    ssh $1 "rm -rf ~/.matconf"
    ssh $1 "mkdir ~/.matconf"
    scp ~/.matconf/bashrc $1:~/.matconf/bashrc
    scp ~/.matconf/functions $1:~/.matconf/functions
    ssh $1 "rm -rf ~/.bashrc"
    ssh $1 "ln -s ~/.matconf/bashrc ~/.bashrc"

}

function ffind() {
    find -iname "*$1*"
}

function ggrep() {
    grep -R $1 .
}

function eggrep() {
    grep -R -E $1 .
}

function generate_bm_and_swim_projects(){
    reload_project_for_qtcreator.sh
    cp BTS_SC_BM.files swim/swim.files
    cp BTS_SC_BM.includes swim/swim.includes
    cp BTS_SC_BM.files bm/bm.files
    cp BTS_SC_BM.includes bm/bm.includes

    cd swim/
    convert_to_swim_project swim.files
    convert_to_swim_project swim.includes
    cd ..

    cd bm/
    convert_to_bm_project bm.files
    convert_to_bm_project bm.includes
    cd ..
}

function convert_to_swim_project() {
    sed -i '/bm\/.*/d' $1
    sed -i 's/^/\.\/\.\.\//g' $1
}

function convert_to_bm_project() {
    sed -i '/swim\/.*/d' $1
    sed -i 's/^/\.\/\.\.\//g' $1
}
